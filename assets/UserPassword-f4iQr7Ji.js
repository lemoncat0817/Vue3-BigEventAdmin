import{r as m,u as b,a as V,b as S,c as k,d as o,e,g as _,c0 as y,E as U}from"./index-BJZ7nvHG.js";import{a as F,E as x}from"./el-col-DblwbaAp.js";import{E as C,a as N}from"./el-form-item-C_CoVn2C.js";import{E as P}from"./_plugin-vue_export-helper-rQZU3EJZ.js";import{E as R}from"./el-input-DpqjG_sx.js";import{P as q}from"./PageContainer-DADaTFpz.js";import"./el-message-D0pQ_Qr6.js";const D={__name:"UserPassword",setup(B){const u=m(),r=m({old_pwd:"",new_pwd:"",re_pwd:""}),i={old_pwd:[{required:!0,message:"请输入原密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(n,l,t)=>{l===r.value.old_pwd?t(new Error("新密码不能与原密码相同")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(n,l,t)=>{l!==r.value.new_pwd?t(new Error("确认密码与新密码不一致")):t()},trigger:"blur"}]},d=b(),w=V(),c=async()=>{await u.value.validate(),await y(r.value),U.success("修改密碼成功"),d.setToken(""),d.setUser({}),w.push("/login")},f=()=>{u.value.resetFields()};return(n,l)=>{const t=R,s=C,p=P,g=N,v=F,E=x;return S(),k(q,{title:"修改密碼"},{default:o(()=>[e(E,null,{default:o(()=>[e(v,{span:12},{default:o(()=>[e(g,{ref_key:"formRef",ref:u,model:r.value,rules:i,"label-width":"100px",size:"large"},{default:o(()=>[e(s,{label:"原密碼",prop:"old_pwd"},{default:o(()=>[e(t,{modelValue:r.value.old_pwd,"onUpdate:modelValue":l[0]||(l[0]=a=>r.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"新密碼",prop:"new_pwd"},{default:o(()=>[e(t,{modelValue:r.value.new_pwd,"onUpdate:modelValue":l[1]||(l[1]=a=>r.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"確認新密碼",prop:"re_pwd"},{default:o(()=>[e(t,{modelValue:r.value.re_pwd,"onUpdate:modelValue":l[2]||(l[2]=a=>r.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,null,{default:o(()=>[e(p,{type:"primary",onClick:c},{default:o(()=>[_("修改密碼")]),_:1}),e(p,{onClick:f},{default:o(()=>[_("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{D as default};
